<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Mentorship Session with Sagar & Sanjay</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        .price-tag {
            position: absolute;
            top: 20px;
            right: 30px;
            background: rgba(255, 255, 255, 0.15);
            backdrop-filter: blur(10px);
            -webkit-backdrop-filter: blur(10px); /* For Safari support */
            padding: 8px 16px;
            border-radius: 50px;
            font-weight: 700;
            font-size: 1.2rem;
            z-index: 2;
            color: white;
            text-shadow: 0 2px 4px rgba(0, 0, 0, 0.3);
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.2);
            animation: pulse 2s infinite, float 3s ease-in-out infinite;
            transform-origin: center;
            border: 1px solid rgba(255, 255, 255, 0.2); /* Optional: adds a subtle border */
        }
        /* Keep the backdrop-filter property in all states */
        .price-tag:hover {
            background: rgba(255, 255, 255, 0.2); /* Slightly more opaque on hover */
            backdrop-filter: blur(10px);
            -webkit-backdrop-filter: blur(10px);
            animation: pulse 0.5s ease, shake 0.5s ease;
            transform: scale(1.15);
        }
        
        @import url('https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700&family=Montserrat:wght@400;500;600;700&display=swap');
        
        :root {
            --primary: #4361ee;
            --secondary: #3a0ca3;
            --accent: #4cc9f0;
            --light: #f8f9fa;
            --dark: #212529;
            --success: #4ade80;
            --gradient: linear-gradient(135deg, #4361ee, #3a0ca3);
        }
        
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        /* Navigation Bar Styles */
        .navbar {
            background: white;
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
            position: sticky;
            top: 0;
            z-index: 1000;
        }
        
        .nav-container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 0 20px;
        }
        
        .nav-content {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 15px 0;
        }
        
        .logo {
            font-family: 'Montserrat', sans-serif;
            font-weight: 700;
            font-size: 1.5rem;
            color: var(--primary);
            text-decoration: none;
        }
        
        .nav-links {
            display: flex;
            list-style: none;
            gap: 25px;
            margin: 0;
            padding: 0;
        }
        
        .nav-links a {
            text-decoration: none;
            color: var(--dark);
            font-weight: 500;
            font-size: 0.95rem;
            transition: color 0.3s ease;
        }
        
        .nav-links a:hover {
            color: var(--primary);
        }
        
        /* Hamburger Menu for Mobile */
        .hamburger {
            display: none;
            flex-direction: column;
            cursor: pointer;
            width: 30px;
            height: 21px;
            justify-content: space-between;
        }
        
        .hamburger div {
            width: 30px;
            height: 3px;
            background-color: var(--dark);
            transition: all 0.3s ease;
        }
        
        .mobile-menu {
            position: fixed;
            top: 70px;
            right: -300px;
            width: 80%;
            max-width: 300px;
            height: calc(100vh - 70px);
            background: white;
            box-shadow: -5px 0 15px rgba(0, 0, 0, 0.1);
            padding: 30px 20px;
            transition: right 0.3s ease;
            z-index: 999;
        }
        
        .mobile-menu.active {
            right: 0;
        }
        
        .mobile-menu .nav-links {
            flex-direction: column;
            gap: 20px;
        }
        
        /* Main Content Styles */
        body {
            font-family: 'Poppins', sans-serif;
            background: #f0f2f5;
            color: var(--dark);
            line-height: 1.6;
            min-height: 100vh;
        }
        
        .main-content {
            padding: 30px 20px;
            display: flex;
            justify-content: center;
            align-items: center;
            min-height: calc(100vh - 80px);
        }
        
        .container {
            max-width: 800px;
            width: 100%;
            background: white;
            border-radius: 20px;
            box-shadow: 0 15px 40px rgba(0, 0, 0, 0.08);
            overflow: hidden;
            position: relative;
        }
        
        .header {
            background: var(--gradient);
            color: white;
            padding: 40px 40px 30px;
            text-align: center;
            position: relative;
            overflow: hidden;
        }
        
        .header::before {
            content: '';
            position: absolute;
            top: -50%;
            left: -50%;
            width: 200%;
            height: 200%;
            background: radial-gradient(circle, rgba(255,255,255,0.1) 0%, rgba(255,255,255,0) 70%);
            transform: rotate(30deg);
        }
        
        .header h1 {
            font-family: 'Montserrat', sans-serif;
            font-weight: 700;
            font-size: 2.2rem;
            margin-bottom: 10px;
            position: relative;
            letter-spacing: -0.5px;
        }
        
        .header p {
            font-size: 1.1rem;
            opacity: 0.9;
            max-width: 600px;
            margin: 0 auto;
            position: relative;
        }
        
        .mentors {
            display: flex;
            justify-content: center;
            gap: 30px;
            margin-top: 25px;
            position: relative;
        }
        
        .mentor {
            display: flex;
            align-items: center;
            gap: 10px;
            background: rgba(255, 255, 255, 0.15);
            padding: 10px 20px;
            border-radius: 50px;
            backdrop-filter: blur(10px);
            font-weight: 500;
        }
        
        .form-container {
            padding: 30px 25px;
        }
        
        .form-step {
            margin-bottom: 25px;
            padding-bottom: 25px;
            border-bottom: 1px solid #eee;
        }
        
        .form-step h2 {
            font-family: 'Montserrat', sans-serif;
            font-weight: 600;
            color: var(--secondary);
            margin-bottom: 20px;
            display: flex;
            align-items: center;
            gap: 10px;
            font-size: 1.5rem;
        }
        
        .form-row {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 15px;
            margin-bottom: 20px;
        }
        
        @media (max-width: 768px) {
            .form-row {
                grid-template-columns: 1fr;
            }
            
            /* Hide desktop nav, show hamburger */
            .nav-links:not(.mobile-menu .nav-links) {
                display: none;
            }
            
            .hamburger {
                display: flex;
            }
        }
        
        @media (max-width: 480px) {
            .header h1 {
                font-size: 1.8rem;
            }
            
            .container {
                margin: 10px;
                border-radius: 15px;
            }
            
            .form-container {
                padding: 25px 20px;
            }
        }
        
        .form-group {
            margin-bottom: 20px;
        }
        
        .form-group label {
            display: block;
            margin-bottom: 8px;
            font-weight: 500;
            color: var(--dark);
            font-size: 0.95rem;
            display: flex;
            align-items: center;
            gap: 5px;
        }
        
        .form-control {
            width: 100%;
            padding: 14px 16px;
            border: 2px solid #e9ecef;
            border-radius: 12px;
            font-size: 1rem;
            transition: all 0.3s ease;
            font-family: 'Poppins', sans-serif;
        }
        
        .form-control:focus {
            outline: none;
            border-color: var(--primary);
            box-shadow: 0 0 0 3px rgba(67, 97, 238, 0.1);
        }
        
        select.form-control {
            appearance: none;
            background-image: url("image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='16' height='16' fill='%234361ee' viewBox='0 0 16 16'%3E%3Cpath d='M7.247 11.14 2.451 5.658C1.885 5.013 2.345 4 3.204 4h9.592a1 1 0 0 1 .753 1.659l-4.796 5.48a1 1 0 0 1-1.506 0z'/%3E%3C/svg%3E");
            background-repeat: no-repeat;
            background-position: right 16px center;
            padding-right: 40px;
        }
        
        .info-box {
            background: #f0f7ff;
            border: 1px solid #d0e4ff;
            border-radius: 12px;
            padding: 20px;
            margin: 25px 0;
            display: flex;
            align-items: flex-start;
            gap: 15px;
            flex-direction: column;
        }
        
        .info-box i {
            color: var(--primary);
            font-size: 1.5rem;
            margin-top: 3px;
        }
        
        .fixed-session-info {
            background: #e3f2fd;
            border: 1px solid #bbdefb;
            border-radius: 12px;
            padding: 20px;
            margin: 25px 0;
            text-align: center;
        }
        
        .fixed-session-info h3 {
            color: var(--primary);
            margin-bottom: 15px;
            font-size: 1.3rem;
        }
        
        .fixed-session-info p {
            font-size: 1.1rem;
            font-weight: 500;
            margin: 5px 0;
        }
        
        .payment-summary {
            background: #f8f9fa;
            border-radius: 15px;
            padding: 25px;
            margin: 30px 0;
            border: 1px solid #e9ecef;
        }
        
        .payment-summary h3 {
            font-family: 'Montserrat', sans-serif;
            font-weight: 600;
            color: var(--secondary);
            margin-bottom: 20px;
            text-align: center;
            font-size: 1.3rem;
        }
        
        .price-row {
            display: flex;
            justify-content: space-between;
            padding: 12px 0;
            font-size: 1.1rem;
        }
        
        .price-row.border-bottom {
            border-bottom: 1px solid #e9ecef;
        }
        
        .price-row.total {
            font-weight: 700;
            font-size: 1.4rem;
            color: var(--secondary);
            margin-top: 15px;
            padding-top: 15px;
            border-top: 2px solid #e9ecef;
        }
        
        .price-row.total span:last-child {
            color: var(--primary);
            font-size: 1.5rem;
        }
        
        .btn {
            width: 100%;
            padding: 16px;
            background: var(--gradient);
            color: white;
            border: none;
            border-radius: 12px;
            font-size: 1.1rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            font-family: 'Montserrat', sans-serif;
            letter-spacing: 0.5px;
            box-shadow: 0 4px 15px rgba(67, 97, 238, 0.3);
        }
        
        .btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 20px rgba(67, 97, 238, 0.4);
        }
        
        .loading {
            display: none;
            text-align: center;
            padding: 20px;
            background: rgba(67, 97, 238, 0.1);
            border-radius: 10px;
            margin: 20px 0;
        }
        
        .loading.active {
            display: block;
        }
        
        .footer-note {
            text-align: center;
            margin-top: 25px;
            color: #6c757d;
            font-size: 0.9rem;
        }
    </style>

    <link rel="stylesheet" href="path/to/styles.css">
</head>
<body>

    
    <!-- Navigation Bar -->
    <nav class="navbar">
        <div class="nav-container">
            <div class="nav-content">
                <a href="index.html" class="logo">JEE Mentorship</a>
                
                <!-- Desktop Navigation -->
                <ul class="nav-links">
                    <li><a href="terms.html">Terms</a></li>
                    <li><a href="privacy.html">Privacy</a></li>
                    <li><a href="refund.html">Refund Policy</a></li>
                    <li><a href="contact.html">Contact Us</a></li>
                </ul>
                
                <!-- Hamburger Menu for Mobile -->
                <div class="hamburger" id="hamburger-menu">
                    <div class="line1"></div>
                    <div class="line2"></div>
                    <div class="line3"></div>
                </div>
            </div>
        </div>
        
        <!-- Mobile Menu -->
        <div class="mobile-menu" id="mobile-menu">
            <ul class="nav-links">
                <li><a href="terms.html">Terms</a></li>
                <li><a href="privacy.html">Privacy</a></li>
                <li><a href="refund.html">Refund Policy</a></li>
                <li><a href="contact.html">Contact Us</a></li>
            </ul>
        </div>
    </nav>

    <!-- Main Content -->
    <div class="main-content">
        <div class="container">
            <div class="header">
                <div class="price-tag">â‚¹70 Only</div>
                <h1>Book Your Mentorship Session</h1>
                <p>Personalized guidance to help you excel in your JEE preparation</p>
                <div class="mentors">
                    <div class="mentor">
                        <i class="fas fa-user-tie"></i> <span>Sagar</span>
                    </div>
                    <div class="mentor">
                        <i class="fas fa-user-tie"></i> <span>Sanjay</span>
                    </div>
                </div>
            </div>
            
            <div class="form-container">
                <form id="registration-form">
                    <div class="form-step">
                        <h2><i class="fas fa-user"></i> Your Details</h2>
                        <div class="form-row">
                            <div class="form-group">
                                <label for="name"><i class="fas fa-user"></i> Full Name *</label>
                                <input type="text" id="name" class="form-control" placeholder="Enter your full name" required>
                            </div>
                            <div class="form-group">
                                <label for="email"><i class="fas fa-envelope"></i> Email Address *</label>
                                <input type="email" id="email" class="form-control" placeholder="Enter your email" required>
                            </div>
                        </div>
                        <div class="form-row">
                            <div class="form-group">
                                <label for="phone"><i class="fas fa-phone"></i> Phone Number *</label>
                                <input type="tel" id="phone" class="form-control" placeholder="Enter your phone number" required>
                            </div>
                            <div class="form-group">
                                <label for="class"><i class="fas fa-graduation-cap"></i> Current Class *</label>
                                <select id="class" class="form-control" required>
                                    <option value="">Select your class</option>
                                    <option value="11">Class 11</option>
                                    <option value="12">Class 12</option>
                                    <option value="dropper">Dropper</option>
                                </select>
                            </div>
                        </div>
                    </div>
                    
                    <div class="fixed-session-info">
                        <h3><i class="fas fa-calendar-alt"></i> Session Details</h3>
                        <p><strong>Date:</strong> 5th October 2025</p>
                        <p><strong>Time:</strong> 9:00 PM IST</p>
                        <p><strong>Duration:</strong> 1 Hour</p>
                        <p><strong>Platform:</strong> Google Meet</p>
                    </div>
                    
                    <div class="info-box">
                        <i class="fas fa-lightbulb"></i>
                        <div>
                            <strong>Important Note:</strong> This is a special one-time mentorship session scheduled for 5th October 2025 at 9:00 PM IST. 
                            You'll be redirected to a page after 5secs of successful payment, there you can join the whatsapp group .
                        </div>
                    </div>
                    
                    <div class="form-group">
                        <label for="topic"><i class="fas fa-book"></i> Specific Topic or Question (Optional)</label>
                        <input type="text" id="topic" class="form-control" placeholder="What would you like to discuss?">
                    </div>
                    
                    <div class="payment-summary">
                        <h3>Payment Summary</h3>
                        <div class="price-row border-bottom">
                            <span>Mentorship Session (1 Hour)</span>
                            <span>â‚¹70</span>
                        </div>
                        <div class="price-row">
                            <span>Platform Fee</span>
                            <span>â‚¹0</span>
                        </div>
                        <div class="price-row total">
                            <span>Total Payable Amount</span>
                            <span>â‚¹70</span>
                        </div>
                    </div>
                    
                    <div class="loading" id="loading-indicator">
                        <i class="fas fa-spinner fa-spin"></i> Processing your booking...
                    </div>
                    
                    <button type="button" id="pay-now-btn" class="btn">
                        <i class="fas fa-lock"></i> Pay â‚¹70 & Book Session
                    </button>
                    
                    <div class="footer-note">
                        <p>Secure Payment via Razorpay â€¢ 100% Money Back Guarantee if session not conducted</p>
                    </div>
                </form>
            </div>
        </div>
    </div>

    <!-- Chatbot Integration - Inline Version -->
    <script>
    // Inline Chatbot - No separate file needed
    (function() {
        'use strict';
        
        if (window.ChatbotEmbed) return;

        const ChatbotEmbed = {
            config: {
                botName: 'Support Bot',
                welcomeMessage: 'Hi! How can I help you?',
                companyName: 'Your Company',
                primaryColor: '#667eea',
                secondaryColor: '#764ba2',
                position: 'bottom-right',
                theme: 'light',
                zIndex: 10000,
                responses: {}
            },

            init: function(options = {}) {
                this.config = Object.assign(this.config, options);
                this.injectStyles();
                this.injectHTML();
                this.initializeChatbot();
            },

            injectStyles: function() {
                const styleId = 'chatbot-embed-styles';
                if (document.getElementById(styleId)) return;

                const styles = `
                    .chatbot-embed-widget {
                        position: fixed;
                        ${this.config.position.includes('bottom') ? 'bottom: 20px;' : 'top: 20px;'}
                        ${this.config.position.includes('right') ? 'right: 20px;' : 'left: 20px;'}
                        z-index: ${this.config.zIndex};
                        font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
                    }
                    .chatbot-embed-toggle {
                        width: 60px; height: 60px;
                        background: linear-gradient(135deg, ${this.config.primaryColor} 0%, ${this.config.secondaryColor} 100%);
                        border-radius: 50%; display: flex; align-items: center; justify-content: center;
                        cursor: pointer; box-shadow: 0 4px 20px rgba(0, 0, 0, 0.15);
                        transition: all 0.3s ease; position: relative; border: none;
                    }
                    .chatbot-embed-toggle:hover { transform: scale(1.05); box-shadow: 0 6px 25px rgba(0, 0, 0, 0.2); }
                    .chatbot-embed-toggle svg { width: 24px; height: 24px; color: white; transition: all 0.3s ease; }
                    .chatbot-embed-toggle .close-icon { position: absolute; opacity: 0; transform: rotate(90deg); }
                    .chatbot-embed-toggle.active .chat-icon { opacity: 0; transform: rotate(-90deg); }
                    .chatbot-embed-toggle.active .close-icon { opacity: 1; transform: rotate(0deg); }
                    .chatbot-embed-window {
                        position: absolute;
                        ${this.config.position.includes('bottom') ? 'bottom: 80px;' : 'top: 80px;'}
                        ${this.config.position.includes('right') ? 'right: 0;' : 'left: 0;'}
                        width: 350px; height: 500px;
                        background: white; color: black; border-radius: 12px;
                        box-shadow: 0 10px 40px rgba(0, 0, 0, 0.15);
                        display: none; flex-direction: column; overflow: hidden;
                        animation: slideUp 0.3s ease;
                    }
                    .chatbot-embed-window.active { display: flex; }
                    @keyframes slideUp { from { opacity: 0; transform: translateY(20px); } to { opacity: 1; transform: translateY(0); } }
                    .chatbot-embed-header {
                        background: linear-gradient(135deg, ${this.config.primaryColor} 0%, ${this.config.secondaryColor} 100%);
                        color: white; padding: 16px; display: flex; align-items: center; justify-content: space-between;
                    }
                    .chatbot-embed-header-info { display: flex; align-items: center; }
                    .chatbot-embed-avatar { font-size: 24px; margin-right: 12px; }
                    .chatbot-embed-bot-info h3 { margin: 0; font-size: 16px; font-weight: 600; }
                    .chatbot-embed-status { font-size: 12px; opacity: 0.9; }
                    .chatbot-embed-minimize { background: none; border: none; color: white; cursor: pointer; padding: 4px; border-radius: 4px; }
                    .chatbot-embed-messages { flex: 1; overflow-y: auto; padding: 16px; display: flex; flex-direction: column; gap: 16px; }
                    .chatbot-embed-message { display: flex; align-items: flex-start; gap: 8px; animation: fadeIn 0.3s ease; }
                    @keyframes fadeIn { from { opacity: 0; transform: translateY(10px); } to { opacity: 1; transform: translateY(0); } }
                    .chatbot-embed-user-message { flex-direction: row-reverse; }
                    .chatbot-embed-message-content { max-width: 70%; background: #f5f5f5; padding: 12px 16px; border-radius: 18px; }
                    .chatbot-embed-user-message .chatbot-embed-message-content {
                        background: linear-gradient(135deg, ${this.config.primaryColor} 0%, ${this.config.secondaryColor} 100%);
                        color: white;
                    }
                    .chatbot-embed-message-content p { margin: 0; font-size: 14px; line-height: 1.4; }
                    .chatbot-embed-input-area { border-top: 1px solid #eee; padding: 16px; }
                    .chatbot-embed-input-container { display: flex; align-items: center; gap: 8px; background: #f5f5f5; border-radius: 24px; padding: 4px; }
                    .chatbot-embed-input { flex: 1; border: none; background: none; padding: 12px 16px; font-size: 14px; outline: none; color: black; }
                    .chatbot-embed-send-btn {
                        width: 40px; height: 40px;
                        background: linear-gradient(135deg, ${this.config.primaryColor} 0%, ${this.config.secondaryColor} 100%);
                        border: none; border-radius: 50%; color: white; cursor: pointer;
                        display: flex; align-items: center; justify-content: center;
                    }
                    .chatbot-embed-footer { text-align: center; margin-top: 8px; }
                    .chatbot-embed-footer small { color: #666; font-size: 11px; }
                    @media (max-width: 480px) {
                        .chatbot-embed-widget { bottom: 10px; right: 10px; left: 10px; }
                        .chatbot-embed-window { width: 100%; height: 70vh; max-height: 500px; }
                    }
                `;

                const styleElement = document.createElement('style');
                styleElement.id = styleId;
                styleElement.textContent = styles;
                document.head.appendChild(styleElement);
            },

            injectHTML: function() {
                const widgetId = 'chatbot-embed-widget';
                if (document.getElementById(widgetId)) return;

                const html = `
                    <div id="${widgetId}" class="chatbot-embed-widget">
                        <button id="chatbot-embed-toggle" class="chatbot-embed-toggle">
                            <svg class="chat-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                <path d="M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z"></path>
                            </svg>
                            <svg class="close-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                <line x1="18" y1="6" x2="6" y2="18"></line>
                                <line x1="6" y1="6" x2="18" y2="18"></line>
                            </svg>
                        </button>
                        <div id="chatbot-embed-window" class="chatbot-embed-window">
                            <div class="chatbot-embed-header">
                                <div class="chatbot-embed-header-info">
                                    <div class="chatbot-embed-avatar">ðŸ¤–</div>
                                    <div class="chatbot-embed-bot-info">
                                        <h3>${this.config.botName}</h3>
                                        <span class="chatbot-embed-status">Online</span>
                                    </div>
                                </div>
                                <button id="chatbot-embed-minimize" class="chatbot-embed-minimize">
                                    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" width="16" height="16">
                                        <line x1="5" y1="12" x2="19" y2="12"></line>
                                    </svg>
                                </button>
                            </div>
                            <div id="chatbot-embed-messages" class="chatbot-embed-messages">
                                <div class="chatbot-embed-message">
                                    <div class="chatbot-embed-avatar">ðŸ¤–</div>
                                    <div class="chatbot-embed-message-content">
                                        <p>${this.config.welcomeMessage}</p>
                                    </div>
                                </div>
                            </div>
                            <div class="chatbot-embed-input-area">
                                <div class="chatbot-embed-input-container">
                                    <input type="text" id="chatbot-embed-input" class="chatbot-embed-input" placeholder="Type your message..." maxlength="500">
                                    <button id="chatbot-embed-send" class="chatbot-embed-send-btn">
                                        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" width="16" height="16">
                                            <line x1="22" y1="2" x2="11" y2="13"></line>
                                            <polygon points="22,2 15,22 11,13 2,9 22,2"></polygon>
                                        </svg>
                                    </button>
                                </div>
                                <div class="chatbot-embed-footer">
                                    <small>Powered by ${this.config.companyName}</small>
                                </div>
                            </div>
                        </div>
                    </div>
                `;

                document.body.insertAdjacentHTML('beforeend', html);
            },

            initializeChatbot: function() {
                const toggle = document.getElementById('chatbot-embed-toggle');
                const window = document.getElementById('chatbot-embed-window');
                const minimize = document.getElementById('chatbot-embed-minimize');
                const input = document.getElementById('chatbot-embed-input');
                const sendBtn = document.getElementById('chatbot-embed-send');
                const messages = document.getElementById('chatbot-embed-messages');
                let isOpen = false;

                const toggleChat = () => {
                    isOpen = !isOpen;
                    toggle.classList.toggle('active', isOpen);
                    window.classList.toggle('active', isOpen);
                };

                toggle.addEventListener('click', toggleChat);
                minimize.addEventListener('click', toggleChat);

                const sendMessage = () => {
                    const text = input.value.trim();
                    if (!text) return;
                    this.addMessage(text, 'user', messages);
                    input.value = '';
                    setTimeout(() => {
                        const response = this.generateResponse(text);
                        this.addMessage(response, 'bot', messages);
                    }, 500 + Math.random() * 1000);
                };

                sendBtn.addEventListener('click', sendMessage);
                input.addEventListener('keypress', (e) => {
                    if (e.key === 'Enter') sendMessage();
                });
            },

            addMessage: function(text, sender, container) {
                const messageDiv = document.createElement('div');
                messageDiv.className = `chatbot-embed-message ${sender === 'user' ? 'chatbot-embed-user-message' : ''}`;
                messageDiv.innerHTML = `
                    <div class="chatbot-embed-avatar">${sender === 'user' ? 'ðŸ‘¤' : 'ðŸ¤–'}</div>
                    <div class="chatbot-embed-message-content"><p>${text}</p></div>
                `;
                container.appendChild(messageDiv);
                container.scrollTop = container.scrollHeight;
            },

            // AI-powered content analysis
            analyzeWebsiteContent: function() {
                const content = {
                    title: document.title || '',
                    price: this.extractPrice(),
                    date: this.extractDate(),
                    time: this.extractTime(),
                    mentors: this.extractMentors(),
                    formFields: this.getFormFields(),
                    pageStructure: this.analyzePageStructure(),
                    userProgress: this.trackUserProgress()
                };
                return content;
            },

            extractPrice: function() {
                const priceElements = document.querySelectorAll('.price-tag, .total, [class*="price"], [class*="cost"]');
                const prices = [];
                priceElements.forEach(el => {
                    const text = el.textContent.match(/â‚¹\s*(\d+)/);
                    if (text) prices.push(text[1]);
                });
                return prices.length > 0 ? prices[0] : '70';
            },

            extractDate: function() {
                const dateRegex = /(\d{1,2}(?:st|nd|rd|th)?\s+(?:January|February|March|April|May|June|July|August|September|October|November|December)\s+\d{4})/gi;
                const pageText = document.body.textContent;
                const dates = pageText.match(dateRegex);
                return dates ? dates[0] : '5th October 2025';
            },

            extractTime: function() {
                const timeRegex = /(\d{1,2}:\d{2}\s*(?:AM|PM)\s*(?:IST|UTC)?)/gi;
                const pageText = document.body.textContent;
                const times = pageText.match(timeRegex);
                return times ? times[0] : '9:00 PM IST';
            },

            extractMentors: function() {
                const mentorElements = document.querySelectorAll('.mentor, [class*="mentor"]');
                const mentors = [];
                mentorElements.forEach(el => {
                    const name = el.textContent.trim();
                    if (name && !mentors.includes(name)) {
                        mentors.push(name);
                    }
                });
                return mentors.length > 0 ? mentors : ['Sagar', 'Sanjay'];
            },

            getFormFields: function() {
                const inputs = document.querySelectorAll('input, select, textarea');
                const fields = [];
                inputs.forEach(input => {
                    if (input.id && input.placeholder) {
                        fields.push({
                            id: input.id,
                            placeholder: input.placeholder,
                            required: input.required
                        });
                    }
                });
                return fields;
            },

            analyzePageStructure: function() {
                return {
                    hasForm: document.querySelector('form') !== null,
                    hasPaymentButton: document.querySelector('#pay-now-btn') !== null,
                    hasNavigation: document.querySelector('nav') !== null,
                    sections: document.querySelectorAll('div[class*="section"], .form-step').length
                };
            },

            trackUserProgress: function() {
                const form = document.querySelector('#registration-form');
                if (!form) return { completed: 0, total: 0 };
                
                const requiredFields = form.querySelectorAll('[required]');
                let completed = 0;
                requiredFields.forEach(field => {
                    if (field.value.trim()) completed++;
                });
                
                return {
                    completed: completed,
                    total: requiredFields.length,
                    percentage: Math.round((completed / requiredFields.length) * 100)
                };
            },

            generateIntelligentResponse: function(message, websiteData) {
                const lowerMessage = message.toLowerCase();
                
                // Context-aware responses based on user progress
                if (websiteData.userProgress.total > 0 && lowerMessage.match(/help|stuck|form/)) {
                    const progress = websiteData.userProgress;
                    if (progress.percentage < 50) {
                        return `I see you've started filling the form (${progress.completed}/${progress.total} fields completed). Need help with any specific field? I can guide you through the registration process.`;
                    } else if (progress.percentage < 100) {
                        return `You're almost done! You've filled ${progress.completed} out of ${progress.total} required fields. Just complete the remaining fields and you can proceed to payment.`;
                    } else {
                        return `Great! You've completed all required fields. Ready to book your session? Just click the "Pay â‚¹${websiteData.price} & Book Session" button to proceed.`;
                    }
                }

                // Dynamic price responses
                if (lowerMessage.match(/price|cost|fee|money|â‚¹|rupees/)) {
                    return `The mentorship session costs â‚¹${websiteData.price}. This includes a full 1-hour session with ${websiteData.mentors.join(' and ')}, WhatsApp group access, and 100% money-back guarantee if not conducted.`;
                }

                // Dynamic date/time responses
                if (lowerMessage.match(/when|time|date|schedule/)) {
                    return `The session is scheduled for ${websiteData.date} at ${websiteData.time}. Make sure to mark your calendar!`;
                }

                // Smart booking guidance
                if (lowerMessage.match(/book|register|how to|steps/)) {
                    const progress = websiteData.userProgress;
                    if (progress.percentage === 0) {
                        return `To book your session: 1) Fill out your details in the form above (name, email, phone, class) 2) Click "Pay â‚¹${websiteData.price} & Book Session" 3) Complete secure payment. You'll get WhatsApp access immediately!`;
                    } else {
                        return `I see you've started the booking process. Complete the remaining ${progress.total - progress.completed} fields, then click the payment button to secure your spot for ${websiteData.date}!`;
                    }
                }

                // Mentor information with context
                if (lowerMessage.match(/mentor|teacher|who/)) {
                    return `Your mentors are ${websiteData.mentors.join(' and ')} - both experienced JEE professionals. They'll provide personalized guidance during your 1-hour session on ${websiteData.date}.`;
                }

                return null; // Return null if no intelligent response found
            },

            generateResponse: function(message) {
                // Analyze current website content
                const websiteData = this.analyzeWebsiteContent();
                
                // Try intelligent response first
                const intelligentResponse = this.generateIntelligentResponse(message, websiteData);
                if (intelligentResponse) {
                    return intelligentResponse;
                }

                // Fallback to static responses
                const responses = {
                    // Greetings with context
                    'hello': `Hello! I can see you're interested in the JEE mentorship session scheduled for ${websiteData.date}. How can I help you get started?`,
                    'hi': `Hi there! Ready to book your mentorship session with ${websiteData.mentors.join(' and ')}? What would you like to know?`,
                    'hey': `Hey! I notice this is a JEE mentorship booking page. Need help with registration or have questions about the session?`,
                    
                    // Help with context awareness
                    'help': 'I can help you with the booking process, answer questions about the session, or guide you through form completion. What do you need assistance with?',
                    
                    // JEE specific with smart context
                    'jee': `This mentorship focuses on JEE Main & Advanced preparation. ${websiteData.mentors.join(' and ')} will provide personalized strategies during your ${websiteData.date} session.`,
                    'exam': `The session covers JEE Main and Advanced exam strategies, time management, and subject-specific guidance tailored to your current class level.`,
                    'preparation': `Get personalized JEE preparation strategies from experienced mentors. The session on ${websiteData.date} will be customized based on your specific needs and current preparation level.`,
                    
                    // Platform and logistics
                    'platform': `The session will be on Google Meet. After payment, you'll receive the meeting link and WhatsApp group access for ${websiteData.date} at ${websiteData.time}.`,
                    'meet': `Yes, we use Google Meet for the live session. You'll get all joining details after successful payment.`,
                    
                    // Payment and security
                    'payment': `Payment is processed securely through Razorpay. We accept all major payment methods and provide instant confirmation for your ${websiteData.date} session.`,
                    'safe': 'Absolutely! Payment is 100% secure via Razorpay, and we offer a money-back guarantee if the session is not conducted as promised.',
                    
                    // Refund and guarantee
                    'refund': 'We provide 100% money-back guarantee if the session is not conducted. Your payment is completely secure.',
                    'guarantee': 'Yes, complete money-back guarantee for your peace of mind. We\'re committed to delivering quality mentorship.',
                    
                    // Goodbye
                    'bye': `Goodbye! Don't miss out on this valuable mentorship opportunity on ${websiteData.date}. Book your session before spots fill up!`,
                    'thanks': 'You\'re welcome! Feel free to ask if you need help with booking or have more questions about the mentorship program.'
                };
                
                const allResponses = Object.assign(responses, this.config.responses);
                const lowerMessage = message.toLowerCase();
                
                // Keyword matching with enhanced responses
                for (const [key, response] of Object.entries(allResponses)) {
                    if (lowerMessage.includes(key)) {
                        return response;
                    }
                }
                
                // Pattern matching with context
                if (lowerMessage.match(/how much|price|cost|fee|money|â‚¹|rupees/)) {
                    return `The session costs â‚¹${websiteData.price} - excellent value for 1-hour personalized JEE guidance with ${websiteData.mentors.join(' and ')}.`;
                }
                
                if (lowerMessage.match(/when|time|date|schedule/)) {
                    return `Session: ${websiteData.date} at ${websiteData.time}. Mark your calendar and complete your booking to secure your spot!`;
                }
                
                if (lowerMessage.match(/duration|long|hour/)) {
                    return `The session is 1 full hour of personalized mentorship - enough time for detailed discussion and customized guidance for your JEE preparation.`;
                }
                
                // Smart default response with current context
                const progress = websiteData.userProgress;
                if (progress.total > 0 && progress.percentage > 0) {
                    return `I can help with: Session details (${websiteData.date}, â‚¹${websiteData.price}), booking process (you're ${progress.percentage}% done), or mentorship content. What interests you?`;
                } else {
                    return `I can help you with: Session price (â‚¹${websiteData.price}), booking process, session timing (${websiteData.date}), mentor info, or JEE preparation guidance. What would you like to know?`;
                }
            }
        };

        window.ChatbotEmbed = ChatbotEmbed;
    })();

    // Initialize the chatbot
    ChatbotEmbed.init({
        botName: 'Mentorship Support',
        welcomeMessage: 'Hi! Need help with our mentorship program?',
        companyName: 'Sagar & Sanjay Mentorship',
        primaryColor: '#4361ee',
        secondaryColor: '#3a0ca3',
        position: 'bottom-right',
        responses: {
            'price': 'Our mentorship session is â‚¹500. Great value for personalized guidance!',
            'booking': 'Click the "Book Now" button above to schedule your session.',
            'mentors': 'You\'ll be mentored by Sagar and Sanjay, experienced professionals.',
            'duration': 'Each mentorship session lasts approximately 1 hour.',
            'topics': 'We cover career guidance, skill development, and professional growth.'
        }
    });
    </script>

    <!-- Razorpay Script -->
    <script src="https://checkout.razorpay.com/v1/checkout.js"></script>
    <script>
    // Mobile menu toggle
    document.addEventListener('DOMContentLoaded', function() {
        const hamburger = document.getElementById('hamburger-menu');
        const mobileMenu = document.getElementById('mobile-menu');
        
        if (hamburger && mobileMenu) {
            hamburger.addEventListener('click', function() {
                mobileMenu.classList.toggle('active');
                hamburger.classList.toggle('active');
            });
            
            const mobileLinks = mobileMenu.querySelectorAll('.nav-links a');
            mobileLinks.forEach(link => {
                link.addEventListener('click', function() {
                    mobileMenu.classList.remove('active');
                    hamburger.classList.remove('active');
                });
            });
            
            document.addEventListener('click', function(event) {
                if (!mobileMenu.contains(event.target) && !hamburger.contains(event.target) && mobileMenu.classList.contains('active')) {
                    mobileMenu.classList.remove('active');
                    hamburger.classList.remove('active');
                }
            });
        }
    });
    
    // Define the saveToGoogleSheets function
    function saveToGoogleSheets(name, email, phone, className, date, time, topic, amount, paymentId, formattedDate, formattedTime) {
        console.log('Saving to Google Sheets...');
        console.log('Data being sent:', {
            name: name,
            email: email,
            phone: phone,
            className: className,
            date: date,
            time: time,
            topic: topic,
            amount: amount,
            paymentId: paymentId,
            formattedDate: formattedDate,
            formattedTime: formattedTime
        });
        
        // Create form data for Google Apps Script
        const formData = new FormData();
        formData.append('name', name);
        formData.append('email', email);
        formData.append('phone', phone);
        formData.append('class', className);
        formData.append('date', date);
        formData.append('time', time);
        formData.append('topic', topic);
        formData.append('amount', amount);
        formData.append('paymentId', paymentId);
        formData.append('status', 'Confirmed');
        
        // YOUR GOOGLE APPS SCRIPT URL
        const scriptURL = 'https://script.google.com/macros/s/AKfycbx90YUTiilH_TqjJmmCG_Fjoa66FbluEVLzcIM_o8YAKarJvOK-u6RJTEQx0Gh0RpuFTA/exec';
        
        fetch(scriptURL, {
            method: 'POST',
            mode: 'cors'
        })
        .then(response => {
            console.log('Response status:', response.status);
            console.log('Response headers:', [...response.headers.entries()]);
            return response.text();
        })
        .then(text => {
            console.log('Raw response:', text);
            
            // Check if response contains HTML (sign-in page)
            if (text.includes('<html') || text.includes('Sign in') || text.includes('ç™»å½•') || text.includes('signin') || text.includes('Sign in')) {
                console.error('Google Apps Script requires authentication. Redirecting to confirmation page.');
                // Redirect to confirmation page even if Google Sheets fails
                window.location.href = 'https://sagaremmanuel.github.io/JEE/confirm.html?' + 
                    'payment_id=' + paymentId + 
                    '&name=' + encodeURIComponent(name) + 
                    '&date=' + encodeURIComponent(formattedDate) + 
                    '&time=' + encodeURIComponent(formattedTime);
                return;
            }
            
            // Try to parse as JSON
            try {
                const data = JSON.parse(text);
                console.log('Success:', data);
                // Redirect to confirmation page
                window.location.href = 'https://sagaremmanuel.github.io/JEE/confirm.html?' + 
                    'payment_id=' + paymentId + 
                    '&name=' + encodeURIComponent(name) + 
                    '&date=' + encodeURIComponent(formattedDate) + 
                    '&time=' + encodeURIComponent(formattedTime);
            } catch (jsonError) {
                console.error('JSON parse error:', jsonError);
                // Redirect to confirmation page even if Google Sheets fails
                window.location.href = 'https://sagaremmanuel.github.io/JEE/confirm.html?' + 
                    'payment_id=' + paymentId + 
                    '&name=' + encodeURIComponent(name) + 
                    '&date=' + encodeURIComponent(formattedDate) + 
                    '&time=' + encodeURIComponent(formattedTime);
            }
        })
        .catch(error => {
            console.error('Error:', error);
            // Redirect to confirmation page even if Google Sheets fails
            window.location.href = 'https://sagaremmanuel.github.io/JEE/confirm.html?' + 
                'payment_id=' + paymentId + 
                '&name=' + encodeURIComponent(name) + 
                '&date=' + encodeURIComponent(formattedDate) + 
                '&time=' + encodeURIComponent(formattedTime);
        });
    }
    
    // Payment button event listener
    document.getElementById('pay-now-btn').addEventListener('click', function() {
        // Validate form
        const form = document.getElementById('registration-form');
        if (!form.checkValidity()) {
            const invalidFields = form.querySelectorAll(':invalid');
            invalidFields.forEach(field => {
                field.scrollIntoView({ behavior: 'smooth', block: 'center' });
                field.focus();
            });
            alert('Please fill all required fields');
            return;
        }
        
        // Show loading indicator
        document.getElementById('loading-indicator').classList.add('active');
        document.getElementById('pay-now-btn').disabled = true;
        
        // Get form data
        const name = document.getElementById('name').value;
        const email = document.getElementById('email').value;
        const phone = document.getElementById('phone').value;
        const className = document.getElementById('class').value;
        const date = '28th September 2025'; // Fixed date
        const time = '9:00 PM IST'; // Fixed time
        const topic = document.getElementById('topic').value || 'General JEE Preparation';
        
        // Format date for display
        const formattedDate = '28th September 2025';
        const formattedTime = '9:00 PM IST';
        
        // Log the form data
        console.log('Form data collected:', {
            name: name,
            email: email,
            phone: phone,
            className: className,
            date: date,
            time: time,
            topic: topic
        });
        
        // Create Razorpay options
        const options = {
            key: 'rzp_live_RKdy9gFHzkG6dn',
            amount: 7000,
            currency: 'INR',
            name: 'JEE Mentorship with Sagar & Sanjay',
            description: '1-hour mentorship session',
            image: 'https://via.placeholder.com/100x50?text=JEE+Logo',
            handler: function(response) {
                console.log('Payment successful!', response);
                document.getElementById('loading-indicator').classList.remove('active');
                document.getElementById('pay-now-btn').disabled = false;
                
                // Log payment response
                console.log('Payment response:', response);
                
                // Save to Google Sheets
                saveToGoogleSheets(name, email, phone, className, date, time, topic, 70, response.razorpay_payment_id, formattedDate, formattedTime);
            },
            prefill: {
                name: name,
                email: email,
                contact: phone
            },
            notes: {
                class: className,
                date: date,
                time: time,
                topic: topic
            },
            theme: {
                color: '#4361ee'
            },
            modal: {
                ondismiss: function() {
                    document.getElementById('loading-indicator').classList.remove('active');
                    document.getElementById('pay-now-btn').disabled = false;
                    alert('Payment cancelled. Please try again to book your session.');
                }
            }
        };
        
        // Add error handling
        try {
            const rzp = new Razorpay(options);
            
            rzp.on('payment.failed', function(response) {
                console.log('Payment failed:', response.error);
                document.getElementById('loading-indicator').classList.remove('active');
                document.getElementById('pay-now-btn').disabled = false;
                alert('Payment failed: ' + response.error.description);
            });
            
            rzp.open();
        } catch (error) {
            console.error('Error initializing Razorpay:', error);
            document.getElementById('loading-indicator').classList.remove('active');
            document.getElementById('pay-now-btn').disabled = false;
            alert('Error: ' + error.message);
        }
    });
    </script>
    
</body>
</html>
